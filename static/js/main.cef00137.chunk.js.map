{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","Services/PixabayAPI.js","App.js","index.js"],"names":["Searchbar","state","inputValue","inputHandler","evt","setState","target","value","submitHandler","preventDefault","onSubmit","props","reset","this","className","type","onChange","autoComplete","autoFocus","placeholder","Component","ImageGallery","children","ImageGalleryItem","clickHandler","openImage","id","url","onClick","src","alt","defaultProps","Button","totalElements","window","scrollTo","top","document","documentElement","scrollHeight","behavior","text","Loader","color","height","width","timeout","Modal","keyDownHandler","modalToggle","code","currentTarget","addEventListener","removeEventListener","fetchImages","searchQuery","page","axios","get","then","responce","data","hits","App","modalShow","pageNumber","images","modalImageURL","loader","toggleModal","clickImage","filter","item","Number","largeImageURL","getSearchQuery","query","getItemsForGallery","a","catch","error","newImages","prevProps","prevState","map","webformatURL","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cef00137.chunk.js","sourcesContent":["import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    inputValue: \"\",\n  };\n\n  inputHandler = (evt) => {\n    this.setState({ inputValue: evt.target.value });\n  };\n\n  submitHandler = (evt) => {\n    evt.preventDefault();\n    const { onSubmit } = this.props;\n    onSubmit(this.state.inputValue);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ inputValue: \"\" });\n  };\n\n  render() {\n    const { inputValue } = this.state;\n    const { inputHandler, submitHandler } = this;\n\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={submitHandler} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            onChange={inputHandler}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={inputValue}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n  };\n\n  render() {\n    return <ul className=\"ImageGallery\">{this.props.children}</ul>;\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass ImageGalleryItem extends Component {\n  static defaultProps = {\n    url: \"https://static8.depositphotos.com/1431107/919/i/600/depositphotos_9199988-stock-photo-oops-icon.jpg\",\n  };\n\n  static propTypes = {\n    openImage: PropTypes.func.isRequired,\n    url: PropTypes.string,\n    id: PropTypes.number.isRequired,\n  };\n\n  clickHandler = (evt) => {\n    const { openImage } = this.props;\n    const id = evt.target.id;\n    openImage(id);\n  };\n\n  render() {\n    const { url, id } = this.props;\n\n    return (\n      <li key={id} className=\"ImageGalleryItem\">\n        <img\n          onClick={this.clickHandler}\n          id={id}\n          src={url}\n          alt=\"\"\n          className=\"ImageGalleryItem-image\"\n        />\n      </li>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Button extends Component {\n  static defaultProps = {\n    text: \"Just Button\",\n    totalElements: 1,\n  };\n\n  static propTypes = {\n    onClick: PropTypes.func.isRequired,\n    totalElements: PropTypes.number,\n  };\n\n  componentDidMount() {\n    const { totalElements } = this.props;\n    if (totalElements > 10) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: \"smooth\",\n      });\n    }\n  }\n\n  render() {\n    const { text, onClick } = this.props;\n    return (\n      <button className=\"Button\" onClick={onClick} type=\"button\">\n        {text}\n      </button>\n    );\n  }\n}\n\nexport default Button;\n","import { Component } from \"react\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport LoaderSpinner from \"react-loader-spinner\";\n\nclass Loader extends Component {\n  render() {\n    return (\n      <LoaderSpinner\n        className=\"Loader\"\n        type=\"ThreeDots\"\n        color=\"#3f51b5\"\n        height={50}\n        width={50}\n        timeout={10000} //10 secs\n      />\n    );\n  }\n}\n\nexport default Loader;\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Modal extends Component {\n  static propTypes = {\n    url: PropTypes.string.isRequired,\n    modalToggle: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.keyDownHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.keyDownHandler);\n  }\n\n  keyDownHandler = (evt) => {\n    const { modalToggle } = this.props;\n    if (evt.code === \"Escape\") {\n      modalToggle();\n    }\n  };\n\n  clickHandler = (evt) => {\n    const { modalToggle } = this.props;\n    if (evt.target === evt.currentTarget) {\n      modalToggle();\n    }\n  };\n\n  render() {\n    const { url } = this.props;\n    return (\n      <div onClick={this.clickHandler} className=\"Overlay\">\n        <div className=\"Modal\">\n          <img src={url} alt=\"full size\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import axios from \"axios\";\n\nconst BASIC_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"21838364-8451c122c72af9b2106f1fefd\";\n\nfunction fetchImages(searchQuery, page) {\n  return axios\n    .get(\n      `${BASIC_URL}?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=10`\n    )\n    .then((responce) => responce.data.hits);\n}\n\n// fetchImages('footbal', '1')\n\nexport default fetchImages;\n","import { Component } from \"react\";\n\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport ImageGalleryItem from \"./components/ImageGalleryItem\";\nimport Button from \"./components/Button\";\nimport Loader from \"./components/Loader/Loader\";\nimport Modal from \"./components/Modal\";\n\nimport fetchImages from \"./Services/PixabayAPI\";\n\nclass App extends Component {\n  state = {\n    searchQuery: \"\",\n    modalShow: false,\n    pageNumber: 1,\n    images: [],\n    modalImageURL: \"\",\n    loader: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.getItemsForGallery();\n    }\n  }\n\n  toggleModal = () => {\n    this.setState({ modalShow: !this.state.modalShow });\n  };\n\n  openImage = (id) => {\n    this.toggleModal();\n    const { images } = this.state;\n    const clickImage = images.filter((item) => item.id === Number(id));\n    this.setState({ modalImageURL: clickImage[0].largeImageURL });\n  };\n\n  getSearchQuery = (query) => {\n    if (query === this.state.searchQuery) {\n      return;\n    }\n    this.setState({ searchQuery: query, images: [], pageNumber: 1 });\n  };\n\n  getItemsForGallery = async () => {\n    this.setState({ loader: true });\n\n    const { searchQuery, pageNumber } = this.state;\n    const newImages = await fetchImages(searchQuery, pageNumber)\n      .then((responce) => responce)\n      .catch((error) => error);\n\n    this.setState(({ images, pageNumber }) => {\n      return { images: [...images, ...newImages], pageNumber: pageNumber + 1 };\n    });\n\n    // отключение лодера не стал делать через finally, для лучшей читабельности.\n    // в противном случае, придется выносить обновление массива в .then - так читается   трудно.\n    this.setState({ loader: false });\n  };\n\n  render() {\n    const { images, modalImageURL, loader } = this.state;\n\n    return (\n      <>\n        <Searchbar onSubmit={this.getSearchQuery} />\n\n        <ImageGallery>\n          {images.map((item) => (\n            <ImageGalleryItem\n              key={item.id}\n              id={item.id}\n              url={item.webformatURL}\n              openImage={this.openImage}\n            ></ImageGalleryItem>\n          ))}\n        </ImageGallery>\n\n        {loader && <Loader />}\n        {images.length > 0 && !loader && (\n          <Button\n            onClick={this.getItemsForGallery}\n            text={\"load more\"}\n            totalElements={images.length}\n          />\n        )}\n        {this.state.modalShow && (\n          <Modal url={modalImageURL} modalToggle={this.toggleModal} />\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./Styles.css\";\nimport \"modern-normalize\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}